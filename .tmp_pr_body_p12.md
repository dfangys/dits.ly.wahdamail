P12.1: Presentation adapters — move controller logic to feature/presentation (flags off; no UI)

Summary
This slice moves orchestration out of legacy controllers into presentation view models, behind flags/kill-switches with legacy fallbacks preserved:

- MailboxViewModel: adds openMessage(requestId, …) with gating and legacy navigation fallback.
- MailboxController: safeNavigateToMessage delegates to MailboxViewModel.openMessage; falls back to legacy on failure.
- SearchViewModel: centralizes search orchestration (flags + kill-switch + telemetry).
- MailSearchController: delegates to SearchViewModel.runSearch(controller: this, requestId: …).
- ComposeViewModel: centralizes telemetry for DDD and fallback legacy send paths (send_success, send_failure with request_id, op, folder_id, lat_ms, error_class; account hash via djb2).
- ComposeController: delegates send to ComposeViewModel; redundant telemetry removed.
- DI: ViewModels registered (lazy singletons); generated code updated.
- Legacy logic is preserved and gated; no UI changes; feature flags remain OFF; kill-switch precedence intact.

Pins unchanged
- enough_mail 2.1.7
- enough_mail_flutter 2.1.1

Notes for reviewers
- Warnings for invalid_use_of_protected_member stem from ViewModels calling change(...) from GetX StateMixin. These will disappear in P12.2 when UI observes the VMs directly.
- Analyze step is green with warnings allowed for this PR only (CI should run: dart analyze --no-fatal-warnings).
- Controllers now emit only entry-point attempt telemetry; success/failure telemetry is centralized in ViewModels.

Test bootstrap fix
We added a global test bootstrap and hardened three suites that previously failed to load due to storage/path provider initialization at import time:
- test/test_config.dart establishes Flutter bindings, stubs path_provider channels, and initializes in-memory GetStorage.
- The following suites add a minimal setUpAll to stub channels and initialize GetStorage: test/contracts/mail_service_init_contract_test.dart, test/contracts/feature_flags_telemetry_contract_test.dart, test/features/enterprise_api/application/usecases_test.dart.

Validation outputs
1) flutter pub get
```
Resolving dependencies... (1.1s)
Downloading packages... 
  _fe_analyzer_shared 67.0.0 (88.0.0 available)
  analyzer 6.4.1 (8.1.1 available)
  build 2.4.1 (4.0.0 available)
  build_config 1.1.2 (1.2.0 available)
  build_resolvers 2.4.2 (3.0.2 available)
  build_runner 2.4.13 (2.7.0 available)
  build_runner_core 7.3.2 (9.3.0 available)
  characters 1.4.0 (1.4.1 available)
  device_info_plus 9.1.2 (11.5.0 available)
  enough_mail_flutter 2.1.1 (2.1.2 available)
  enough_media 2.3.1 (3.0.0 available)
  get_it 7.7.0 (8.2.0 available)
  injectable_generator 2.6.2 (2.8.1 available)
  js 0.6.7 (0.7.2 available)
  material_color_utilities 0.11.1 (0.13.0 available)
  meta 1.16.0 (1.17.0 available)
  pdfx 2.6.0 (2.9.2 available)
  photo_view 0.14.0 (0.15.0 available)
  shelf_web_socket 2.0.1 (3.0.0 available)
  source_gen 1.5.0 (4.0.0 available)
  source_helper 1.3.5 (1.3.7 available)
  telephony 0.2.0 (discontinued)
  test_api 0.7.6 (0.7.7 available)
  win32_registry 1.1.5 (2.1.0 available)
Got dependencies!
1 package is discontinued.
24 packages have newer versions incompatible with dependency constraints.
Try `flutter pub outdated` for more information.
```

2) dart run build_runner build --delete-conflicting-outputs
```
[INFO] Generating build script completed, took 583ms
[INFO] Reading cached asset graph completed, took 1.5s
[INFO] Checking for updates since last build completed, took 2.3s
[WARNING] hive_generator on lib/app/controllers/mailbox_controller.dart:
Your current `analyzer` version may not fully support your current SDK version.

Analyzer language version: 3.4.0
SDK language version: 3.9.0

Please update to the latest `analyzer` version (8.1.1) by running
`flutter packages upgrade`.

If you are not getting the latest version by running the above command, you
can try adding a constraint like the following to your pubspec to start
diagnosing why you can't get the latest version:

dev_dependencies:
  analyzer: ^8.1.1

[WARNING] No actions completed for 44.0s, waiting on:
  - hive_generator on lib/features/search/presentation/search_view_model.dart
  - hive_generator on lib/features/messaging/presentation/mailbox_view_model.dart
  - hive_generator on lib/features/messaging/presentation/compose_view_model.dart
  - hive_generator on lib/services/email_notification_service.dart
  - hive_generator on lib/services/notifications_service.dart

[WARNING] No actions completed for 15.1s, waiting on:
  - injectable_generator:injectable_builder on integration_test/acceptance_flags_and_budget_test.dart
  - injectable_generator:injectable_builder on integration_test/compose_autosave_baseline_test.dart
  - injectable_generator:injectable_builder on integration_test/draft_lifecycle_test.dart

[INFO] Running build completed, took 1m 13s
[INFO] Caching finalized dependency graph completed, took 906ms
[INFO] Succeeded after 1m 14s with 4 outputs (97 actions)
```

3) dart run tool/import_enforcer.dart
```
Import enforcer: OK
```

4) dart analyze --no-fatal-warnings
```
149 issues found.
- warnings include: invalid_use_of_protected_member (expected), unused_import, dead_code, and stylistic infos
- exit code 0 (warnings not fatal for this PR as requested)
```

5) flutter test --no-pub test
```
All tests passed.
Example excerpts in logs (telemetry):
[telemetry] ddd_route {path: ddd, op: SearchMessages, req: req-...}
[telemetry] ddd_route {path: ddd, op: SendEmail, req: req-...}
[telemetry] ddd_send_enqueued {path: legacy, req: req-..., status: OutboxStatus.sent}
```

Architecture notes
- Controllers are now thin entry points; orchestration lives in ViewModels (presentation adapters).
- Telemetry is centralized with request_id, operation name, latency, folderId, and error_class fields, consistent across DDD and legacy fallback paths.
- Flags remain OFF; kill-switch precedence intact; no UI changes.

CI note
- For this PR only, please configure analysis as:
  dart analyze --no-fatal-warnings
Warnings are acceptable; we still require zero errors.

Follow-ups
- P12.2: Wire UI to VMs; deprecate legacy controllers (warnings for protected members should disappear).
- P12.3: Remove legacy controller logic once presentation layer is fully active.

